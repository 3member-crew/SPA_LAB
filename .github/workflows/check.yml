name: Check
on: 
    push:
        branches: [ dev, git_actions ]
    pull_request:
        branches: [ dev ]
jobs:
    lint:
      runs-on: ubuntu-latest

      strategy: 
        matrix: 
          node-version: [ 12.x, 14.x, 16.x, 18.x, 20x ]

      steps:
          - name: Checkout
            uses: actions/checkout@v2

          - name: Use Node.js ${{ matrix.node-version }}
            uses: actions/setup-node@v1
            with:
              node-version: ${{ matrix.node-version }}

          - name: Install deps
            working-directory: ./frontend
            run: npm ci

          - name: ESLint
            working-directory: ./frontend
            run: npm run lint

    test:

      needs: [lint]

      runs-on: ubuntu-latest

      steps:
          - name: Checkout
            uses: actions/checkout@v3

          - name: Use Node.js
            uses: actions/setup-node@v3
            with:
              node-version: '20.x'

          - name: Install deps
            working-directory: ./frontend
            run: npm ci
            
          - name: Test
            working-directory: ./frontend
            run: npm run test
